<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "zh-tw" }}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Site.Data.settings.site_title }}</title>
    <meta name="description" content="{{ .Site.Data.settings.site_description }}">
    <link rel="canonical" href="{{ .Permalink }}">

    {{ with .Site.Data.settings.favicon }}
    <link rel="icon" type="image/png" href="{{ . | relURL }}">
    {{ end }}

    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ .Permalink }}">
    <meta property="og:title" content="{{ .Site.Data.settings.site_title }}">
    <meta property="og:description" content="{{ .Site.Data.settings.site_description }}">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ .Site.Data.settings.site_title }}">
    <meta name="twitter:description" content="{{ .Site.Data.settings.site_description }}">

    {{- with .Site.Data.settings.share_image -}}
        <meta property="og:image" content="{{ . | absURL }}">
        <meta name="twitter:image" content="{{ . | absURL }}">
    {{- end -}}

    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

    {{ with (templates.Defer (dict "key" "global")) }}
    {{ partial "css.html" . }}
    {{ end }}

    <style>        
        :root {
            --cms-primary: {{.Site.Data.settings.appearance.primary_color | default "#3b82f6"}};
    }
    </style>
</head>

<body class="bg-gray-50 text-gray-900 font-sans">
    <nav class="fixed top-0 w-full z-[100] bg-white/70 backdrop-blur-lg border-b border-gray-200/50">
        <div class="max-w-6xl mx-auto px-6 h-20 flex justify-between items-center">

            <a href="/" class="flex items-center gap-3 z-[110]">
                {{ with .Site.Data.settings.logo_image }}
                <img src="{{ . | relURL }}" alt="Logo" class="h-8 md:h-10 w-auto object-contain">
                {{ end }}
                {{ with .Site.Data.settings.logo_text }}
                <span class="text-xl md:text-2xl font-black tracking-tighter text-primary">{{ . }}</span>
                {{ end }}
            </a>

            <input type="checkbox" id="menu-toggle" class="hidden peer">

            <label for="menu-toggle" class="md:hidden cursor-pointer p-2 z-[110] relative text-gray-900">
                <svg class="w-6 h-6 block peer-checked:hidden" id="open-svg" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7">
                    </path>
                </svg>
                <svg class="w-6 h-6 hidden peer-checked:block" id="close-svg" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                    </path>
                </svg>
            </label>

            <div class="hidden md:flex items-center space-x-8">
                <a href="#services"
                    class="nav-link text-sm font-bold text-gray-600 hover:text-primary transition-colors">{{
                    .Site.Data.settings.navbar.service_text }}</a>
                <a href="#about"
                    class="nav-link text-sm font-bold text-gray-600 hover:text-primary transition-colors">{{
                    .Site.Data.settings.navbar.about_text }}</a>
                <a href="#testimonials"
                    class="nav-link text-sm font-bold text-gray-600 hover:text-primary transition-colors">{{
                    .Site.Data.settings.navbar.testimonials_text }}</a>
                <a href="#faq" class="nav-link text-sm font-bold text-gray-600 hover:text-primary transition-colors">{{
                    .Site.Data.settings.navbar.faq_text }}</a>
                <a href="#contact"
                    class="nav-link bg-primary text-white px-6 py-2.5 rounded-full text-sm font-bold hover:bg-primary-600 transition shadow-lg shadow-primary/30">
                    {{ .Site.Data.settings.navbar.contact_text }}
                </a>
            </div>

            <div id="mobile-menu"
                class="fixed inset-0 top-0 left-0 w-full h-screen bg-white/95 backdrop-blur-2xl flex-col p-6 pt-24 space-y-4 hidden peer-checked:flex md:hidden animate-in fade-in duration-300">
                <div class="flex flex-col space-y-3">
                    <a href="#services"
                        class="mobile-nav-link p-4 text-lg font-bold text-gray-800 bg-gray-100/50 rounded-2xl active:bg-primary/10">
                        {{ .Site.Data.settings.navbar.service_text }}
                    </a>
                    <a href="#about"
                        class="mobile-nav-link p-4 text-lg font-bold text-gray-800 bg-gray-100/50 rounded-2xl active:bg-primary/10">
                        {{ .Site.Data.settings.navbar.about_text }}
                    </a>
                    <a href="#testimonials"
                        class="mobile-nav-link p-4 text-lg font-bold text-gray-800 bg-gray-100/50 rounded-2xl active:bg-primary/10">
                        {{ .Site.Data.settings.navbar.testimonials_text }}
                    </a>
                    <a href="#faq"
                        class="mobile-nav-link p-4 text-lg font-bold text-gray-800 bg-gray-100/50 rounded-2xl active:bg-primary/10">
                        {{ .Site.Data.settings.navbar.faq_text }}
                    </a>
                    <a href="#contact"
                        class="mobile-nav-link mt-4 w-full py-5 bg-primary text-white text-center rounded-2xl font-bold shadow-xl shadow-primary/20">
                        {{ .Site.Data.settings.navbar.contact_text }}
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <main>
        {{- block "main" . -}}{{- end -}}
    </main>

    <footer class="bg-gray-950 text-gray-400 py-20 mt-auto">
        <div class="max-w-6xl mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-16 items-start">

                <div class="space-y-6 text-center md:text-left">
                    <h3 class="text-2xl font-bold text-white tracking-tighter">{{ .Site.Data.settings.logo_text }}</h3>
                    <p class="max-w-sm mx-auto md:mx-0 leading-relaxed">{{ .Site.Data.settings.footer.bio }}</p>
                </div>

                <div class="flex flex-col items-center md:items-end space-y-8">
                    <div class="flex space-x-4">
                        {{ range .Site.Data.settings.footer.socials }}
                        <a href="{{ .url }}"
                            class="w-12 h-12 rounded-full border border-gray-800 flex items-center justify-center text-white hover:bg-white hover:text-primary transition-all duration-300">
                            <span class="text-xs font-bold">{{ .platform }}</span>
                        </a>
                        {{ end }}
                    </div>
                    <p class="text-xs uppercase tracking-widest text-gray-600">{{ .Site.Data.settings.footer.copyright
                        }}</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        if (window.netlifyIdentity) {
            window.netlifyIdentity.on("init", user => {
                if (!user) {
                    window.netlifyIdentity.on("login", () => {
                        document.location.href = "/admin/";
                    });
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function () {
            const menuToggle = document.getElementById('menu-toggle');
            const mobileLinks = document.querySelectorAll('.mobile-nav-link');

            // 當點擊手機版選單內的任何連結時，關閉選單
            mobileLinks.forEach(link => {
                link.addEventListener('click', () => {
                    menuToggle.checked = false;
                });
            });
        });
    </script>
</body>

</html>